@model IEnumerable<UserListRowDTO>

@{
}
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<div class="card" style="width: 100%;">
    <div class="card-title"><h5 class="card-title">İstifadəçilər</h5></div>
    <div class="card-body d-flex">
        
        
        <a asp-controller="Users" asp-action="modify" class="btn btn-primary">Əlavə Et</a>
        <form action="/somewhere" method="post" class="ml-4">
        <button class="btn btn-danger" formaction="/Users/InvalidateAllUsers" formmethod="post">Bütün Tokenləri Sil</button>
        </form>
        <div class="ml-auto"></div>
        <div class="d-flex align-items-center">
            @if(Convert.ToBoolean(ViewData["isActiveChecked"]))
            {
                <input type="checkbox" id="chkActives" name="chkActives" onclick="ActivesFilterChecked()" checked>
            }
            else
            {
                <input type="checkbox" id="chkActives" name="chkActives" onclick="ActivesFilterChecked()" >
            }
            <label for="chkActives" class="mr-2">Aktivlər</label><br>
        </div>
        <input id   ="myInput" type="text" placeholder="Axtar..">
    </div>
</div>

<table class="table table-bordered table-responsive table-hover" id="userstable">
    <thead>
      <tr>
        <th>Id </th>
        <th>İstifadəçi Adı </th>
        <th>A.S.A </th>
        <th>Qrup</th>
        <th>Email</th>
        <th>Tel #</th>
        <th>FİN</th>
        <th>Aktiv</th>
        <th></th>
      </tr>
    </thead>
   <tbody id="myTable">

       
    @foreach (var d in Model)
    {
<tr>
    <td>@d.UserId</td>
    <td>@d.Username</td>
    <td>@d.DisplayName</td>
    <td>@d.GroupName</td>
    <td>@d.Email</td>
    <td>@d.Phone</td>
    <td>@d.UserPID</td>
    <td>@Html.CheckBoxFor(m => d.IsActive, new { onclick = "return false" })</td>
    
    <td>
        <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
               <a class="dropdown-item" asp-controller="Users" asp-action="modify" asp-route-id="@d.UserId">Düzəliş</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="WarehousePermission" asp-route-id="@d.UserId">Anbarlar</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="MenuPermission" asp-route-id="@d.UserId">Menyu İzni</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="CardCodePermission" asp-route-id="@d.UserId">Cari Kodları</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="SafeboxPermission" asp-route-id="@d.UserId">Kassa Kodları</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="BankAccPermission" asp-route-id="@d.UserId">Bank Hesab Kodları</a>
               <a class="dropdown-item" asp-controller="Users" asp-action="BranchPermission" asp-route-id="@d.UserId">Filiallar</a>
              </div>
        </div>
    </td>
</tr>

    }

    </tbody>
</table>

<script>
function ActivesFilterChecked() {
  var checkBox = document.getElementById("chkActives");
  if (checkBox.checked == true){
    location.href = '/users?isActive=true';
  } else {
     location.href = '/users?isActive=false';
  }
}
</script>